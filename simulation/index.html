<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/main.css">
    <title>Spatial Multiplexing Simulation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/virtual-labs/virtual-style@0.0.8-b/css/style.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js"></script>
</head>
<body>
    
        <section class="fre" id="TASK1">
            <div class="max-width">
                <h2 class="title">Spatial Multiplexing simulation</h2>
                <div class="columns is-centered">
                    <div class="v-collapsible-instruction-container v-instruction-container">
                        <div class="v-collapsible is-size-5">Instructions</div>
                        <div class="v-content" style="text-align: left; padding-left: 10%; padding-right: 10%;">
                            <ol>
                                <li><strong>Getting Started:</strong> This simulation demonstrates spatial multiplexing in MIMO wireless systems.</li>
                                <li><strong>Simulate Channel:</strong> Click the "Simulate Channel" button to generate a random complex channel matrix between transmit and receive antennas.</li>
                                <li><strong>Analyze Results:</strong> After simulation, examine the complex channel matrix displayed in the output section.</li>
                                <li><strong>Perform SVD:</strong> Click "Perform SVD" to decompose the channel matrix and reveal its eigenbeams (spatial modes).</li>
                                <li><strong>Visualize Eigenbeams:</strong> Click this button to see how the signal propagates through different spatial paths, showing the strength (singular value) and SNR of each path.</li>
                                <li><strong>Interpret Metrics:</strong> The rank indicates the number of usable spatial streams, while total SNR and capacity show key performance metrics.</li>
                                <li><strong>Reset:</strong> Click "Reset" to start over with a new simulation.</li>
                            </ol>
                        </div>
                    </div>
                </div>
                <div class="columns-container">
                    <div class="left-column box">
                        <div id="input-section" class="layout-column">
                            <h3>Controls</h3>
                            <div class="control-group">
                                <label for="txCount">Transmit Antennas (max 6):</label>
                                <input type="number" id="txCount" value="4" min="1" max="6" onchange="validateAntennaCount(this)">
                            </div>
                            <div class="control-group">
                                <label for="rxCount">Receive Antennas (max 6):</label>
                                <input type="number" id="rxCount" value="4" min="1" max="6" onchange="validateAntennaCount(this)">
                            </div>
                        
                            <div class="error-message" id="errorMessage"></div>
                            <button id="simulateBtn" onclick="simulate()">Simulate Channel</button>
                            <button id="svdBtn" onclick="performSVD()" style="display: none;">Perform SVD</button>
                            <button id="resetBtn" class="accent" onclick="resetSimulation()">Reset</button>
                        </div>
                    </div>
                    <div class="center-column box">
                        
                        <div id="simulation-section" class="layout-column">
                            <div class="simulation-container">
                                <div class="column">
                                    <div class="column-label">Transmitter</div>
                                    <div id="txColumn"></div>
                                </div>
                                <canvas id="signalCanvas"></canvas>
                                <div class="column">
                                    <div class="column-label">Receiver</div>
                                    <div id="rxColumn"></div>
                                </div>
                            </div>
                            <div class="simulation-footer">
                                <div class="info-block" id="analysisInfo" style="display: none;"></div>
                                <button id="eigenbeamBtn" class="accent" onclick="visualizeEigenbeams()" style="display: none;">Visualize Eigenbeams</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="right-column box">
                        <div id="output-section" class="layout-column">
                            <h3>Outputs</h3>
                            <div id="channelMatrixDisplay" class="matrix-display" style="display: none;">
                                <h3>Channel Matrix (H)</h3>
                                <div id="matrixContainer"></div>
                            </div>
                            <div id="svdMatrixDisplay" class="matrix-display" style="display: none;">
                                <h3>Singular Values (Î£)</h3>
                                <div id="sigmaMatrixContainer"></div>
                            </div>
                            <div id="metricsDisplay" class="metrics-display" style="display: none;">
                                <h3>System Performance</h3>
                                <div class="metric-container">
                                    <div class="metric">Rank (R)<span id="rankOutput">-</span></div>
                                    <div class="metric">Sum Capacity<span id="capacityOutput">- bps/Hz</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                
            </div>
            
        </section>
    



<script src="./js/main.js"></script>
<script src="https://cdn.jsdelivr.net/gh/virtual-labs/virtual-style@0.0.8-b/js/script.js"></script>

<script src="../assets/js/iframeResize.js"></script>
        
        </body>
</html>